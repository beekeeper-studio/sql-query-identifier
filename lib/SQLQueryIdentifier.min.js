!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SQLQueryIdentifier",[],e):"object"==typeof exports?exports.SQLQueryIdentifier=e():t.SQLQueryIdentifier=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n="undefined"==typeof e.strict||e.strict,r=(0,o.parse)(t,n);return r.body.map(function(e){return{start:e.start,end:e.end,text:t.substring(e.start,e.end+1),type:e.type,executionType:e.executionType}})}Object.defineProperty(e,"__esModule",{value:!0}),e.identify=r;var o=n(1)},function(t,e,n){"use strict";function r(t){for(var e=arguments.length<=1||void 0===arguments[1]||arguments[1],n=o({input:t}),r={type:"QUERY",start:0,end:t.length-1,body:[],tokens:[]},i=n,u=void 0,s=["whitespace","comment-inline","comment-block"];i.position<n.end;){var p=o({prevState:i}),c=(0,T.scanToken)(p);if(!u){if(~s.indexOf(c.type)){r.tokens.push(c),i=p;continue}u=a(e,c)}u.addToken(c),r.tokens.push(c),i=p;var d=u.getStatement();d.endStatement&&(d.end=c.end,r.body.push(d),u=null)}if(u){var f=u.getStatement();f.endStatement||(f.end=r.end,r.body.push(f))}return r}function o(t){var e=t.input,n=t.prevState;return n?{input:n.input,position:n.position,start:n.position+1,end:n.input.length-1,body:[]}:{input:e,position:-1,start:0,end:e.length-1,body:[]}}function a(t,e){if("keyword"===e.type)switch(e.value.toUpperCase()){case"SELECT":return i(t);case"CREATE":return c(t);case"DROP":return d(t);case"INSERT":return u(t);case"UPDATE":return s(t);case"DELETE":return p(t);case"TRUNCATE":return f(t)}if(!t&&"unknown"===e.type)return l(t);throw new Error('Invalid statement parser "'+e.value+'"')}function i(t){var e={},n=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"SELECT"}]},add:function(t){e.type="SELECT",e.start=t.start},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function u(t){var e={},n=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"INSERT"}]},add:function(t){e.type="INSERT",e.start=t.start},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function s(t){var e={},n=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"UPDATE"}]},add:function(t){e.type="UPDATE",e.start=t.start},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function p(t){var e={},n=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"DELETE"}]},add:function(t){e.type="DELETE",e.start=t.start},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function c(t){var e={},n=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"CREATE"}]},add:function(t){e.start=t.start},postCanGoToNext:function(){return!0}},{preCanGoToNext:function(){return!1},validation:{requireBefore:["whitespace"],acceptTokens:[{type:"keyword",value:"TABLE"},{type:"keyword",value:"DATABASE"}]},add:function(t){e.type="CREATE_"+t.value.toUpperCase()},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function d(t){var e={},n=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"DROP"}]},add:function(t){e.start=t.start},postCanGoToNext:function(){return!0}},{preCanGoToNext:function(){return!1},validation:{requireBefore:["whitespace"],acceptTokens:[{type:"keyword",value:"TABLE"},{type:"keyword",value:"DATABASE"}]},add:function(t){e.type="DROP_"+t.value.toUpperCase()},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function f(t){var e={},n=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"TRUNCATE"}]},add:function(t){e.type="TRUNCATE",e.start=t.start},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function l(t){var e={},n=[{preCanGoToNext:function(){return!1},add:function(t){e.type="UNKNOWN",e.start=t.start},postCanGoToNext:function(){return!0}}];return v(t,e,n)}function v(t,e,n){var r=0,o=void 0,a=function(t,e){return!t.validation||t.validation.acceptTokens.filter(function(t){var n=e.type===t.type,r=!t.value||e.value.toUpperCase()===t.value;return n&&r}).length>0},i=function(t){return!t.requireBefore||~t.requireBefore.indexOf(o.type)};return{getStatement:function(){return e},addToken:function(u){if(e.endStatement)throw new Error("This statement has already got to the end.");if("semicolon"===u.type)return void(e.endStatement=";");if("whitespace"===u.type)return void(o=u);if(!e.type){var s=n[r];if(s.preCanGoToNext(u)&&(r++,s=n[r]),!i(s)){var p=s.requireBefore.join(" or ");throw new Error("Expected any of these tokens "+p+' before "'+u.value+'" (currentStep='+r+").")}if(!a(s,u)&&t){var c=s.validation.acceptTokens.map(function(t){return'(type="'+t.type+'" value="'+t.value+'")'}).join(" or ");throw new Error("Expected any of these tokens "+c+' instead of type="'+u.type+'" value="'+u.value+'" (currentStep='+r+").")}s.add(u),e.executionType=y[e.type]||"UNKNOWN",s.postCanGoToNext(u)&&r++,o=u}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=r;var T=n(2),y={SELECT:"LISTING",INSERT:"MODIFICATION",DELETE:"MODIFICATION",UPDATE:"MODIFICATION",CREATE_DATABASE:"MODIFICATION",CREATE_TABLE:"MODIFICATION",DROP_DATABASE:"MODIFICATION",DROP_TABLE:"MODIFICATION",TRUNCATE:"MODIFICATION",UNKNOWN:"UNKNOWN"}},function(t,e){"use strict";function n(t){var e=r(t);if(T(e))return u(t);if(E(e,t))return s(t);if(N(e,t))return c(t);if(y(e,t))return p(t);if(C(e))return d(t);var n=f(t);return n?n:l(t)}function r(t){return t.position===t.input.length-1?null:(t.position++,t.input[t.position])}function o(t){t.position!==t.start&&t.position--}function a(t){return~A.indexOf(t.toUpperCase())}function i(t){return x[t]}function u(t){var e=void 0;do e=r(t);while(T(e));null===e||T(e)||o(t);var n=t.input.slice(t.start,t.position+1);return{type:"whitespace",value:n,start:t.start,end:t.start+n.length-1}}function s(t){var e=void 0;do e=r(t);while("\n"!==e&&null!==e);null!==e&&"\n"!==e&&o(t);var n=t.input.slice(t.start,t.position+1);return{type:"comment-inline",value:n,start:t.start,end:t.start+n.length-1}}function p(t){var e=void 0;do e=r(t);while("'"!==e&&null!==e);null!==e&&"'"!==e&&o(t);var n=t.input.slice(t.start,t.position+1);return{type:"string",value:n,start:t.start,end:t.start+n.length-1}}function c(t){var e=void 0,n=void 0;do n=e,e=r(t);while(n+e!=="*/"&&null!==e);null!==e&&"/"!==e&&o(t);var a=t.input.slice(t.start,t.position+1);return{type:"comment-block",value:a,start:t.start,end:t.start+a.length-1}}function d(t){var e=void 0;do e=r(t);while(C(e));null===e||C(e)||o(t);var n=t.input.slice(t.start,t.position+1);return a(n)?{type:"keyword",value:n,start:t.start,end:t.start+n.length-1}:v(t,n)}function f(t){var e=t.input.slice(t.start,t.position+1),n=i(e);return n?{type:n,value:e,start:t.start,end:t.start+e.length-1}:null}function l(t){return{type:"unknown",value:t.input.slice(t.start,t.position+1),start:t.start,end:t.start}}function v(t,e){return{type:"unknown",value:e,start:t.start,end:t.start+e.length-1}}function T(t){return" "===t||"\t"===t||"\n"===t}function y(t){return"'"===t}function E(t,e){var n="-"===t;if(!n)return!1;var a=r(e);return n="-"===a,n||o(e),n}function N(t,e){var n="/"===t;if(!n)return!1;var a=r(e);return n="*"===a,n||o(e),n}function C(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}Object.defineProperty(e,"__esModule",{value:!0}),e.scanToken=n;var A=["SELECT","INSERT","DELETE","UPDATE","CREATE","DROP","TABLE","DATABASE","TRUNCATE"],x={";":"semicolon"}}])});
//# sourceMappingURL=SQLQueryIdentifier.min.js.map