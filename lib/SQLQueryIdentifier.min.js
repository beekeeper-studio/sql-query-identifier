!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("SQLQueryIdentifier",[],e):"object"==typeof exports?exports.SQLQueryIdentifier=e():t.SQLQueryIdentifier=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){var e=(0,o.parse)(t);return e.body.map(function(e){return{start:e.start,end:e.end,text:t.substring(e.start,e.end+1),type:e.type}})}Object.defineProperty(e,"__esModule",{value:!0}),e.identify=r;var o=n(1)},function(t,e,n){"use strict";function r(t){for(var e=o({input:t}),n={type:"QUERY",start:0,end:t.length-1,body:[],tokens:[]},r=e,u=void 0;r.position<e.end;){var i=o({prevState:r}),s=(0,v.scanToken)(i);if(!u){if("whitespace"===s.type){n.tokens.push(s),r=i;continue}u=a(s)}u.addToken(s),n.tokens.push(s),r=i;var p=u.getStatement();p.endStatement&&(p.end=s.end,n.body.push(p),u=null)}if(u){var c=u.getStatement();c.endStatement||(c.end=n.end,n.body.push(c))}return n}function o(t){var e=t.input,n=t.prevState;return n?{input:n.input,position:n.position,start:n.position+1,end:n.input.length-1,body:[]}:{input:e,position:-1,start:0,end:e.length-1,body:[]}}function a(t){if("keyword"===t.type)switch(t.value.toUpperCase()){case"SELECT":return u();case"CREATE":return c();case"DROP":return d();case"INSERT":return i();case"UPDATE":return s();case"DELETE":return p();case"TRUNCATE":return f()}throw new Error('Invalid statement parser "'+t.value+'"')}function u(){var t={},e=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"SELECT"}]},add:function(e){t.type="SELECT",t.start=e.start},postCanGoToNext:function(){return!0}}];return l(t,e)}function i(){var t={},e=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"INSERT"}]},add:function(e){t.type="INSERT",t.start=e.start},postCanGoToNext:function(){return!0}}];return l(t,e)}function s(){var t={},e=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"UPDATE"}]},add:function(e){t.type="UPDATE",t.start=e.start},postCanGoToNext:function(){return!0}}];return l(t,e)}function p(){var t={},e=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"DELETE"}]},add:function(e){t.type="DELETE",t.start=e.start},postCanGoToNext:function(){return!0}}];return l(t,e)}function c(){var t={},e=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"CREATE"}]},add:function(e){t.start=e.start},postCanGoToNext:function(){return!0}},{preCanGoToNext:function(){return!1},validation:{requireBefore:["whitespace"],acceptTokens:[{type:"keyword",value:"TABLE"},{type:"keyword",value:"DATABASE"}]},add:function(e){t.type="CREATE_"+e.value.toUpperCase()},postCanGoToNext:function(){return!0}}];return l(t,e)}function d(){var t={},e=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"DROP"}]},add:function(e){t.start=e.start},postCanGoToNext:function(){return!0}},{preCanGoToNext:function(){return!1},validation:{requireBefore:["whitespace"],acceptTokens:[{type:"keyword",value:"TABLE"},{type:"keyword",value:"DATABASE"}]},add:function(e){t.type="DROP_"+e.value.toUpperCase()},postCanGoToNext:function(){return!0}}];return l(t,e)}function f(){var t={},e=[{preCanGoToNext:function(){return!1},validation:{acceptTokens:[{type:"keyword",value:"TRUNCATE"}]},add:function(e){t.type="TRUNCATE",t.start=e.start},postCanGoToNext:function(){return!0}}];return l(t,e)}function l(t,e){var n=0,r=void 0,o=function(t,e){return t.validation.acceptTokens.filter(function(t){var n=e.type===t.type,r=!t.value||e.value.toUpperCase()===t.value;return n&&r}).length>0},a=function(t){return!t.requireBefore||~t.requireBefore.indexOf(r.type)};return{getStatement:function(){return t},addToken:function(u){if(t.endStatement)throw new Error("This statement has already got to the end.");if("semicolon"===u.type)return void(t.endStatement=";");if("whitespace"===u.type)return void(r=u);if(!t.type){var i=e[n];if(i.preCanGoToNext(u)&&(n++,i=e[n]),!a(i)){var s=i.requireBefore.join(" or ");throw new Error("Expected any of these tokens "+s+' before "'+u.value+'" (currentStep='+n+").")}if(!o(i,u)){var p=i.validation.acceptTokens.map(function(t){return'(type="'+t.type+'" value="'+t.value+'")'}).join(" or ");throw new Error("Expected any of these tokens "+p+' instead of type="'+u.type+'" value="'+u.value+'" (currentStep='+n+").")}i.add(u),i.postCanGoToNext(u)&&n++,r=u}}}}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=r;var v=n(2)},function(t,e){"use strict";function n(t){var e=r(t);if(y(e))return i(t);if(E(e,t))return s(t);if(h(e,t))return c(t);if(T(e,t))return p(t);if(C(e))return d(t);var n=f(t);return n?n:l(t)}function r(t){return t.position===t.input.length-1?null:(t.position++,t.input[t.position])}function o(t){t.position!==t.start&&t.position--}function a(t){return~k.indexOf(t.toUpperCase())}function u(t){return w[t]}function i(t){var e=void 0;do e=r(t);while(y(e));null===e||y(e)||o(t);var n=t.input.slice(t.start,t.position+1);return{type:"whitespace",value:n,start:t.start,end:t.start+n.length-1}}function s(t){var e=void 0;do e=r(t);while("\n"!==e&&null!==e);null!==e&&"\n"!==e&&o(t);var n=t.input.slice(t.start,t.position+1);return{type:"comment-inline",value:n,start:t.start,end:t.start+n.length-1}}function p(t){var e=void 0;do e=r(t);while("'"!==e&&null!==e);null!==e&&"'"!==e&&o(t);var n=t.input.slice(t.start,t.position+1);return{type:"string",value:n,start:t.start,end:t.start+n.length-1}}function c(t){var e=void 0,n=void 0;do n=e,e=r(t);while(n+e!=="*/"&&null!==e);null!==e&&"/"!==e&&o(t);var a=t.input.slice(t.start,t.position+1);return{type:"comment-block",value:a,start:t.start,end:t.start+a.length-1}}function d(t){var e=void 0;do e=r(t);while(C(e));null===e||C(e)||o(t);var n=t.input.slice(t.start,t.position+1);return a(n)?{type:"keyword",value:n,start:t.start,end:t.start+n.length-1}:v(t,n)}function f(t){var e=t.input.slice(t.start,t.position+1),n=u(e);return n?{type:n,value:e,start:t.start,end:t.start+e.length-1}:null}function l(t){return{type:"unkown",value:t.input.slice(t.start,t.position+1),start:t.start,end:t.start}}function v(t,e){return{type:"unkown",value:e,start:t.start,end:t.start+e.length-1}}function y(t){return" "===t||"\t"===t||"\n"===t}function T(t){return"'"===t}function E(t,e){var n="-"===t;if(!n)return!1;var a=r(e);return n="-"===a,n||o(e),n}function h(t,e){var n="/"===t;if(!n)return!1;var a=r(e);return n="*"===a,n||o(e),n}function C(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}Object.defineProperty(e,"__esModule",{value:!0}),e.scanToken=n;var k=["SELECT","INSERT","DELETE","UPDATE","CREATE","DROP","TABLE","DATABASE","TRUNCATE"],w={";":"semicolon"}}])});
//# sourceMappingURL=SQLQueryIdentifier.min.js.map